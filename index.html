<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Contact & Alerts</title>
  <style>
    body { font-family: Arial, sans-serif; padding:20px; text-align:center; background:#f7f7f7; }
    .card { max-width:480px; margin:auto; padding:20px; background:white; border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.08); }
    textarea { width:100%; margin-top:12px; padding:10px; font-size:16px; border-radius:8px; }
    button { width:100%; padding:16px; margin-top:12px; font-size:18px; border-radius:8px; border:0; cursor:pointer; }
    .non { background:#ffd966; }
    .em { background:#ff5c5c; color:white; }
    p.small { color:#666; font-size:13px; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Contact & Alerts</h2>
    <p>Type whatâ€™s happening, then choose alert type:</p>
    <textarea id="alertText" rows="3" placeholder="Describe the situation..."></textarea>
    <button class="non" id="non">Alert Parents (Non-Emergency)</button>
    <button class="em" id="em">Alert Parents (EMERGENCY)</button>
    <p class="small">Emergency will send a push notification + SMS.</p>
  </div>

<script>
const WEBHOOK_NON = "https://hooks.nabu.casa/gAAAAABo3pB78MXGlGV7qD2GfgKUAuqWocQEunm7NKXz9yK7WNy7Yub7rwsevtfLwvSs8pz2lS1SXowXK1tf_NgNAg3PqniD65GBnpdlANN6idc02vWrLkQwfeYCsQxp4EQTAKC-ReVwqZTJnZWIAS5fp1wy97Dj-FZGnfCNSlAWXiTxX0bRDYc=";   // Replace with your full long URL from Cloud â†’ Manage
const WEBHOOK_EM  = "https://hooks.nabu.casa/gAAAAABo3pB-PhuMyBbdvUdMDCz6o1i7omJrlYknSqiMJBHgWTJFYLH2KpbgycY3iocQruf8jFMC8Zvo3f7yqTnOir17vdg7GVc5p6Jx8K-P2W5pcxnCW_66HBSQR3IkiexY0Lk_vlIHodK8fDUnJcpft4XkfDcdcgI8TdOHvrm-ZjdGKL2RDXA=";    // Replace with your full long URL from Cloud â†’ Manage

async function callWebhook(url, type){
  let text = document.getElementById('alertText').value || "No details provided";
  try {
    await fetch(url, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ description: text, alert_type: type })
    });
    alert("Notification sent.");
  } catch(e) {
    alert("Failed to send. Try again or call parent directly.");
  }
}

document.getElementById('non').addEventListener('click', () => callWebhook(WEBHOOK_NON, "non"));
document.getElementById('em').addEventListener('click', () => {
  if (confirm("ðŸš¨ Emergency â€” are you sure?")) callWebhook(WEBHOOK_EM, "emergency");
});
</script>
</body>
</html>
