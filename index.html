<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Contact & Alerts</title>
  <style>
    body { font-family: Arial, sans-serif; padding:20px; text-align:center; background:#f7f7f7; }
    .card { max-width:480px; margin:auto; padding:20px; background:white; border-radius:10px; box-shadow:0 6px 18px rgba(0,0,0,0.08); }
    textarea { width:100%; margin-top:12px; padding:10px; font-size:16px; border-radius:8px; }
    button { width:100%; padding:16px; margin-top:12px; font-size:18px; border-radius:8px; border:0; cursor:pointer; }
    .non { background:#ffd966; }
    .em { background:#ff5c5c; color:white; }
    p.small { color:#666; font-size:13px; }
  </style>
</head>
<body>
  <div class="card">
    <h2>Contact & Alerts</h2>
    <p>Type whatâ€™s happening, then choose alert type:</p>
    <textarea id="alertText" rows="3" placeholder="Describe the situation..."></textarea>
    <button class="non" id="non">Alert Parents (Non-Emergency)</button>
    <button class="em" id="em">Alert Parents (EMERGENCY)</button>
    <p class="small">Emergency will send a push notification + SMS.</p>
  </div>

<script>
const BASE_URL = "https://kqrn2batlvo5cuynv0iv9m6xvixcurzs.ui.nabu.casa";   // replace with your Remote UI URL
const WEBHOOK_NON = BASE_URL + "/api/webhook/nfc_alert_non";
const WEBHOOK_EM  = BASE_URL + "/api/webhook/nfc_alert_em";

async function callWebhook(url, type){
  let text = document.getElementById('alertText').value || "No details provided";
  try {
    await fetch(url + "?desc=" + encodeURIComponent(text) + "&type=" + type, {
      method: "POST",
      mode: "no-cors"
    });
    alert("Notification sent.");
  } catch(e) {
    alert("Failed to send. Error: " + e);
  }
}

document.getElementById('non').addEventListener('click', () => callWebhook(WEBHOOK_NON, "non"));
document.getElementById('em').addEventListener('click', () => {
  if (confirm("ðŸš¨ Emergency â€” are you sure?")) callWebhook(WEBHOOK_EM, "emergency");
});
</script>


</body>
</html>




